<div style='margin-bottom:1em'>
  <h3>Torrents <small>({{ ds.state.torrents.values.length }})</small></h3>
</div>

<div class="form-group">
  <input [(ngModel)]='filter'
         placeholder="Search... (try filtering with label: music syntax, tracker and state also supported)"
         type="text"
         class="form-control" />
</div>

<div class="table-responsive" style='margin-bottom:2em'>
<table class="table table-hover">
  <thead>
    <tr>
      <th class='fit-content'><i class='fa fa-check'></i></th>
      <th class='fit-content'></th>
      <th>Name</th>
      <th class='fit-content'>Progress</th>
      <th class='fit-content'>Ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor='#value of ds.state.torrents.values | object:filter'>
      <td><input type='checkbox' [(ngModel)]='value.checked' /></td>
      <td class='state' [ngSwitch]='value.state'>
        <i *ngSwitchWhen='"Seeding"' class='fa fa-arrow-up'></i>
        <i *ngSwitchWhen='"Downloading"' class='fa fa-arrow-down'></i>
        <i *ngSwitchWhen='"Paused"' class='fa fa-pause'></i>
        <i *ngSwitchWhen='"Error"' class='fa fa-exclamation'></i>
        <i *ngSwitchWhen='"Queued"' class='fa fa-circle-o'></i>
      </td>
      <td><a [routerLink]='["TorrentDetail", {hash: value.hash}]'>{{ value.name }}</a></td>
      <td>{{ value.progress | number:'1.0-2' }}%</td>
      <td>{{ value.ratio | number:'1.0-2' }}</td>
    </tr>
  </tbody>
</table>
</div>

<!-- TODO: Add Label -->
<nav *ngIf='getSelected().length > 0' class='navbar navbar-default navbar-fixed-bottom'>
  <div class='container'>
    <div class="navbar-text">
      {{ getSelected().length }} Selected
      <a (click)='unselect()' href='javascript:false'>
        <i class='fa fa-ban'></i>
      </a>
    </div>
    <div class='navbar-btn navbar-right btn-group dropup'>
      <button class='btn btn-default' (click)='ds.pause(getSelected())'>
        <i class='fa fa-pause'></i> Pause
      </button>

      <button class='btn btn-default' (click)='ds.resume(getSelected())'>
        <i class='fa fa-play'></i> Resume
      </button>

      <button class='btn btn-default' (click)='ds.remove(getSelected(), true)'>
        <i class='fa fa-times'></i> Remove
      </button>
      <button class='btn btn-default dropdown-toggle' data-toggle='dropdown' style='height:34px'>
        <span class='caret'></span>
      </button>
      <ul class='dropdown-menu'>
        <li><a (click)='ds.remove(getSelected(), false)' style='cursor:pointer'>torrent only</a></li>
      </ul>
    </div>
  </div>
</nav>
